# Sweet Memories — SweetMemories

A family digital memory book SaaS application. Users can create beautiful, shareable photo books organized into chapters and categories, powered by a clean admin panel and a public book viewer.

---

## Tech Stack

| Layer | Technology |
|---|---|
| Framework | React 18 + TypeScript |
| Build Tool | Vite 5 |
| Routing | TanStack Router v1 (file-based) |
| Data Fetching | TanStack Query v5 |
| Styling | Tailwind CSS v3 (custom design tokens) |
| Icons | Material Symbols Outlined (font-based) |
| Fonts | Inter (display), Playfair Display (serif) |

---

## Project Structure

```
sweetmemories/
├── html/                          # Original static HTML prototypes (8 pages)
├── src/
│   ├── main.tsx                   # App entry point
│   ├── index.css                  # Global styles & Tailwind directives
│   ├── routeTree.gen.ts           # Auto-generated by TanStack Router Vite plugin
│   │
│   ├── lib/
│   │   ├── api.ts                 # Mock API (200ms delay, no real backend)
│   │   ├── queryClient.ts         # TanStack Query client (staleTime: 60s)
│   │   └── router.ts              # TanStack Router instance
│   │
│   ├── types/
│   │   └── index.ts               # Shared TypeScript interfaces
│   │
│   ├── hooks/
│   │   ├── useUpload.ts           # Upload form state + simulated progress
│   │   ├── useTemplateConfig.ts   # useQuery + useMutation, optimistic updates
│   │   └── useSettings.ts         # Draft-based dirty tracking
│   │
│   ├── components/
│   │   ├── ui/                    # Primitive UI components
│   │   │   ├── Icon.tsx
│   │   │   ├── Button.tsx
│   │   │   ├── Toggle.tsx
│   │   │   ├── Badge.tsx
│   │   │   └── GoogleIcon.tsx
│   │   └── layout/                # Shared layout chrome
│   │       ├── PublicHeader.tsx
│   │       ├── PublicFooter.tsx
│   │       ├── AdminSidebar.tsx
│   │       └── AdminHeader.tsx
│   │
│   ├── features/
│   │   ├── landing/               # Public landing page sections
│   │   │   ├── HeroSection.tsx
│   │   │   ├── FeaturesSection.tsx
│   │   │   ├── GallerySection.tsx
│   │   │   └── CtaSection.tsx
│   │   ├── book/                  # Public book viewer
│   │   │   ├── BookHero.tsx
│   │   │   ├── BookChapter.tsx
│   │   │   └── TabNav.tsx
│   │   └── admin/                 # Admin panel features
│   │       ├── dashboard/
│   │       │   ├── StatsGrid.tsx
│   │       │   ├── UploadDropzone.tsx
│   │       │   └── CategoryCard.tsx
│   │       ├── categories/
│   │       │   ├── CategoryCard.tsx
│   │       │   └── AddCategoryCard.tsx
│   │       ├── upload/
│   │       │   ├── DropzoneArea.tsx
│   │       │   └── UploadProgressItem.tsx
│   │       ├── templates/
│   │       │   └── TemplateCard.tsx
│   │       ├── template-config/
│   │       │   ├── HeroImagePicker.tsx
│   │       │   └── GalleryCategoryCheckbox.tsx
│   │       └── settings/
│   │           ├── SettingsSection.tsx
│   │           └── PrivacyToggle.tsx
│   │
│   └── routes/                    # File-based routes (TanStack Router)
│       ├── __root.tsx
│       ├── index.tsx              # / — Landing page
│       ├── book/
│       │   └── $slug.tsx          # /book/:slug — Public book viewer
│       └── admin/
│           ├── _layout.tsx        # Shared admin layout wrapper
│           ├── index.tsx          # /admin — Dashboard
│           ├── templates.tsx      # /admin/templates
│           ├── categories.tsx     # /admin/categories
│           ├── upload.tsx         # /admin/upload
│           ├── template-config.tsx# /admin/template-config
│           └── settings.tsx       # /admin/settings
```

---

## Routes

| Path | Description |
|---|---|
| `/` | Public landing page |
| `/book/:slug` | Public shareable book viewer |
| `/admin` | Admin dashboard |
| `/admin/templates` | Browse & select book templates |
| `/admin/categories` | Manage photo categories/chapters |
| `/admin/upload` | Upload photos with progress |
| `/admin/template-config` | Configure hero image & gallery layout |
| `/admin/settings` | Privacy & account settings |

---

## Design Tokens

| Token | Value |
|---|---|
| Primary | `#6ee619` |
| Background Light | `#f7f8f6` |
| Background Dark | `#182111` |
| Dark mode | Class-based (`dark:`) |

---

## Development

```bash
npm run dev        # Start dev server
npm run build      # Production build (tsc + vite)
```

> Build output: ~353 KB / 109 KB gzipped, 208 modules, ~1.6s build time.

### Database Setup with Drizzle ORM

#### Running Migrations

1. **Generate migrations** (when you change the schema):
   ```bash
   npx drizzle-kit generate
   ```

2. **Run migrations**:
   ```bash
   npx drizzle-kit migrate
   ```

#### Apply Changes

1. **Run**:
   ```bash
   npx drizzle-kit push
   ```

#### Schema Configuration

- Schema files are located in `src/database/schema/`
- Migration files are generated in `src/database/migrations/`
- Configuration is in `drizzle.config.ts`